# TranscribeFlow Configuration
# Copy this file to backend/.env and fill in your values

# ===========================================
# PATHS
# ===========================================
# Base directory for all transcription files (default: ~/Transcriptions)
# TRANSCRIBEFLOW_BASE_PATH=~/Transcriptions

# ===========================================
# TRANSCRIPTION SETTINGS
# ===========================================
# Default engine: mlx-whisper (local, recommended for Mac)
TRANSCRIBEFLOW_DEFAULT_ENGINE=mlx-whisper

# Default model: tiny, base, small, medium, large-v2, large-v3, large-v3-turbo, turbo
TRANSCRIBEFLOW_DEFAULT_MODEL=large-v3-turbo

# ===========================================
# SPEAKER DIARIZATION (who said what)
# ===========================================
# Enable/disable speaker identification
TRANSCRIBEFLOW_DIARIZATION_ENABLED=false

# HuggingFace token for Pyannote diarization
# 1. Get token: https://huggingface.co/settings/tokens
# 2. Accept license: https://huggingface.co/pyannote/speaker-diarization-3.1
TRANSCRIBEFLOW_HF_TOKEN=

# Speaker detection range
TRANSCRIBEFLOW_MIN_SPEAKERS=2
TRANSCRIBEFLOW_MAX_SPEAKERS=6

# ===========================================
# WHISPER ANTI-HALLUCINATION SETTINGS
# ===========================================
# These settings help prevent fake text like "Субтитры сделал DimaTorzok"
# that Whisper generates during silence or low-quality audio.

# Skip segments where probability of "no speech" exceeds this threshold (0.0-1.0)
# Higher = more aggressive filtering of silence. Default: 0.6
TRANSCRIBEFLOW_WHISPER_NO_SPEECH_THRESHOLD=0.6

# Skip segments with average log probability below this value
# More negative = stricter filtering of uncertain segments. Default: -1.0
TRANSCRIBEFLOW_WHISPER_LOGPROB_THRESHOLD=-1.0

# Skip segments with high compression ratio (repetitive/garbled text)
# Lower = stricter filtering. Default: 2.4
TRANSCRIBEFLOW_WHISPER_COMPRESSION_RATIO_THRESHOLD=2.4

# Skip silence gaps longer than N seconds (prevents hallucinations during silence)
# Set to empty to disable. Default: 2.0
TRANSCRIBEFLOW_WHISPER_HALLUCINATION_SILENCE_THRESHOLD=2.0

# Use previous transcribed text as context for next segment
# Helps maintain consistency. Default: true
TRANSCRIBEFLOW_WHISPER_CONDITION_ON_PREVIOUS_TEXT=true

# Optional context prompt to guide transcription (e.g., "Это рабочий митинг")
# Leave empty for no prompt. Default: empty
TRANSCRIBEFLOW_WHISPER_INITIAL_PROMPT=

# ===========================================
# CLOUD ASR PROVIDERS (optional, not yet implemented)
# ===========================================
TRANSCRIBEFLOW_ASSEMBLYAI_API_KEY=
TRANSCRIBEFLOW_OPENAI_API_KEY=
TRANSCRIBEFLOW_DEEPGRAM_API_KEY=
TRANSCRIBEFLOW_ELEVENLABS_API_KEY=

# ===========================================
# LLM PROVIDERS (for AI post-processing)
# ===========================================
# Default LLM provider: gemini, openrouter
TRANSCRIBEFLOW_DEFAULT_LLM_PROVIDER=gemini

TRANSCRIBEFLOW_GEMINI_API_KEY=
TRANSCRIBEFLOW_OPENROUTER_API_KEY=

# ===========================================
# SERVER SETTINGS
# ===========================================
TRANSCRIBEFLOW_BACKEND_HOST=127.0.0.1
TRANSCRIBEFLOW_BACKEND_PORT=8000
